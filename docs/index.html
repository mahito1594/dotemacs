<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-04-11 Thu 22:26 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My configuration file for Emacs</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Mahito TANNO" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="worg.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">My configuration file for Emacs</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd1f6d9e">1. Introduction</a>
<ul>
<li><a href="#org178eddf">1.1. init.el</a></li>
<li><a href="#org61c6050">1.2. my-init.el</a></li>
<li><a href="#org68c09d0">1.3. utility.el</a></li>
<li><a href="#org8db74c3">1.4. site-lisp/</a></li>
</ul>
</li>
<li><a href="#orgddc1d79">2. Fundamental</a>
<ul>
<li><a href="#org09a86f9">2.1. Variables</a></li>
<li><a href="#org9eb4e2f">2.2. Functions</a></li>
<li><a href="#orga8375ae">2.3. Package manager</a></li>
<li><a href="#org8ede7cf">2.4. Some package</a></li>
</ul>
</li>
<li><a href="#org7c32487">3. Utilities</a>
<ul>
<li><a href="#org9e2ac8e">3.1. Language, Codings</a></li>
<li><a href="#org171af52">3.2. Server</a></li>
<li><a href="#org9512ae9">3.3. Backup files</a></li>
<li><a href="#org933cdf4">3.4. Directories</a></li>
<li><a href="#org4cb1078">3.5. Candidates</a></li>
<li><a href="#org2ae70c4">3.6. Navigation</a></li>
<li><a href="#org9cbe265">3.7. Others</a></li>
</ul>
</li>
<li><a href="#orgd851853">4. Completion and syntax checking</a>
<ul>
<li><a href="#orgc402c32">4.1. Yasnippet</a></li>
<li><a href="#org57da66f">4.2. Company</a></li>
<li><a href="#orgfd3473c">4.3. Flycheck</a></li>
<li><a href="#org724a217">4.4. LSP</a></li>
</ul>
</li>
<li><a href="#orgd4f5452">5. Documents</a>
<ul>
<li><a href="#orgc86a1da">5.1. Org-mode</a></li>
<li><a href="#org667fed6">5.2. Outline</a></li>
<li><a href="#orgef7ed5c">5.3. TeX/LaTeX</a></li>
<li><a href="#org8ebc57a">5.4. Markdown</a></li>
</ul>
</li>
<li><a href="#org549eff3">6. Programming Languages</a>
<ul>
<li><a href="#orgf9a4f72">6.1. C/C++</a></li>
<li><a href="#orgf1a9bdd">6.2. Emacs Lisp</a></li>
<li><a href="#org8803303">6.3. Ocaml</a></li>
<li><a href="#org9ac2c60">6.4. Python</a></li>
</ul>
</li>
<li><a href="#orgfb4216e">7. Appearance</a>
<ul>
<li><a href="#org668f48a">7.1. Color theme</a></li>
<li><a href="#orgbbf9510">7.2. Frame</a></li>
<li><a href="#org55aa0d2">7.3. Font</a></li>
</ul>
</li>
<li><a href="#orgf9f73f9">8. Global keybindings</a></li>
<li><a href="#orgb9e54fd">9. Local configuration</a>
<ul>
<li><a href="#orgaaa4189">9.1. Overview</a></li>
</ul>
</li>
<li><a href="#org3bf996a">10. License</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgd1f6d9e" class="outline-2">
<h2 id="orgd1f6d9e"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org178eddf" class="outline-3">
<h3 id="org178eddf"><span class="section-number-3">1.1</span> init.el</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<code>init.el</code> は <code>elisp</code> を <code>load-path</code> に追加し， <code>utility.el</code> と <code>my-init.el</code> を読み込みます．
ただし Emacs のバージョンが古い場合はこれらは読み込まれません．
</p>

<p>
また Customize で設定したカスタム変数は <code>.emacs.d/custom-file.el</code> に保存されます．
ローカルに設定したい事柄は <code>.emacs.d/local-conf.el</code> に記述します．
これらは Git によって追跡されません．
</p>

<p>
起動時にガベージコレクタが走らないように閾値を下げます．
ただし，起動後には元々の値に戻すようにします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my--orig-gc-cons-threshold</span> gc-cons-threshold
  <span class="org-doc">"Original value of `</span><span class="org-doc"><span class="org-constant">gc-cons-threshold</span></span><span class="org-doc">'."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> gc-cons-threshold <span class="org-rainbow-delimiters-depth-2">(</span>* 8 1000 1000<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my--reset-gc-cons-threshold</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Reset the value of `</span><span class="org-doc"><span class="org-constant">gc-cons-threshold</span></span><span class="org-doc">' to</span>
<span class="org-doc">its original one."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> gc-cons-threshold my--orig-gc-cons-threshold<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'emacs-startup-hook
          #'my--reset-gc-cons-threshold<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org61c6050" class="outline-3">
<h3 id="org61c6050"><span class="section-number-3">1.2</span> my-init.el</h3>
<div class="outline-text-3" id="text-1-2">
<p>
<code>my-init.el</code> に個人的な Emacs の設定をまとめてあります．
Emacs バージョン 25.4 以降での利用を想定しています．
特にバージョン 26 以降での利用を強く勧めます．
</p>

<p>
設定を記述するにあたって，以下に強い影響を受けました．
</p>

<ul class="org-ul">
<li><a href="https://github.com/raxod502/radian/tree/develop/emacs">radian/emacs</a> (by <a href="https://github.com/raxod502">raxod502</a>)</li>
<li><a href="https://github.com/seagle0128/.emacs.d">Centaur Emacs</a> (by <a href="https://github.com/seagle0128">seagle0128</a>)</li>
</ul>

<p>
<code>my-init.el</code> を編集する際は <code>README.org</code> を編集します．
編集後に <code>org-babel-tangle</code> を用いて <code>my-init.el</code> を生成します．
</p>

<p>
本設定ファイルで定義する変数や関数には <code>my-</code> というプレフィックスをつけることにします．
</p>
</div>
</div>

<div id="outline-container-org68c09d0" class="outline-3">
<h3 id="org68c09d0"><span class="section-number-3">1.3</span> utility.el</h3>
<div class="outline-text-3" id="text-1-3">
<p>
変数・定数・関数のうち，いくつかは <code>elisp/utility.el</code> に抜き出します．
必要に応じてバイトコンパイルを行います．
</p>
</div>
</div>

<div id="outline-container-org8db74c3" class="outline-3">
<h3 id="org8db74c3"><span class="section-number-3">1.4</span> site-lisp/</h3>
<div class="outline-text-3" id="text-1-4">
<p>
いくつかのパッケージは <code>site-lisp/</code> 以下に配置して <code>require</code> します．
<code>site-lisp</code> に配置するのは次の通り．
</p>

<ul class="org-ul">
<li><a href="https://github.com/purcell/exec-path-from-shell">exec-path-from-shell</a></li>
</ul>

<p>
これらは git submodule で管理します．
</p>

<p>
まず <code>site-lisp/</code> 以下の全てのサブディレクトリを load-path に追加します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defconst</span> <span class="org-variable-name">my-site-lisp-directory</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"site-lisp"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"We should put here packages."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>default-directory my-site-lisp-directory<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'load-path default-directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>fboundp 'normal-top-level-add-subdirs-to-load-path<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>normal-top-level-add-subdirs-to-load-path<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
ログインシェルの環境変数を引き継ぎます．
変数 <code>exec-path-from-shell-arguments</code> から <code>"-i"</code> を取り除くと処理が早くなるようです．
Issue <a href="https://github.com/purcell/exec-path-from-shell/issues/36">#36</a> <a href="https://github.com/purcell/exec-path-from-shell/issues/50">#50</a> <a href="https://github.com/purcell/exec-path-from-shell/issues/75">#75</a> を参照してください．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>memq window-system '<span class="org-rainbow-delimiters-depth-3">(</span>mac ns x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> '<span class="org-constant">exec-path-from-shell</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>delete <span class="org-string">"-i"</span> exec-path-from-shell-arguments<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">drop "-i" from option</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>exec-path-from-shell-initialize<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgddc1d79" class="outline-2">
<h2 id="orgddc1d79"><span class="section-number-2">2</span> Fundamental</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org09a86f9" class="outline-3">
<h3 id="org09a86f9"><span class="section-number-3">2.1</span> Variables</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<ol class="org-ol">
<li><a id="org25a6e89"></a>Init file and its document<br />
<div class="outline-text-4" id="text-2-1-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-locate-readme</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"README.org"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Place where `</span><span class="org-doc"><span class="org-constant">README.org</span></span><span class="org-doc">' should be."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-locate-init</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"elisp/my-init.el"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Place where `</span><span class="org-doc"><span class="org-constant">my-init.el</span></span><span class="org-doc">' should be."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-locate-utility</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"elisp/utility.el"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Place where `</span><span class="org-doc"><span class="org-constant">utility.el</span></span><span class="org-doc">' should be."</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-locate-document</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"docs/index.html"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Place where `</span><span class="org-doc"><span class="org-constant">index.html</span></span><span class="org-doc">' should be."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org08d0f03"></a>Backup file<br />
<div class="outline-text-4" id="text-2-1-2">
<p>
ファイルを <code>.emacs.d/backups</code> 以下に自動保存します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-backup-directory</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"backups/"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"We save automatically files into the directory:</span>
<span class="org-doc">We set `</span><span class="org-doc"><span class="org-constant">backup-directory-alist</span></span><span class="org-doc">' and `</span><span class="org-doc"><span class="org-constant">auto-save-file-name-transforms</span></span><span class="org-doc">' to `</span><span class="org-doc"><span class="org-constant">my-backup-directory</span></span><span class="org-doc">'."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org26bbab7"></a>Local configuration directory<br />
<div class="outline-text-4" id="text-2-1-3">
<p>
環境・マシンごとの設定を <code>.emacs.d/local-conf.el</code> に記述します．
詳細は <a href="#orgb9e54fd">Local configuration</a> を参照してください．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-local-config-file</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"local-conf.el"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"You put Emacs Lisp files here for local config."</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org9eb4e2f" class="outline-3">
<h3 id="org9eb4e2f"><span class="section-number-3">2.2</span> Functions</h3>
<div class="outline-text-3" id="text-2-2">
</div>
<ol class="org-ol">
<li><a id="orgf32ea5a"></a>Open document<br />
<div class="outline-text-4" id="text-2-2-1">
<p>
<code>M-x my-open-document</code> で本設定ファイルを HTML にエクスポートしたものをブラウザで開きます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-open-document</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Open document in default browser."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>browse-url-of-file my-locate-document<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org2b93b44"></a>Edit init file<br />
<div class="outline-text-4" id="text-2-2-2">
<p>
<code>README.org</code> を編集するには <code>C-x C-f</code> で開くか <code>M-x my-edit-init</code> とします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-edit-init</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Open `</span><span class="org-doc"><span class="org-constant">README.org</span></span><span class="org-doc">' to edit."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>find-file my-locate-readme<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>M-x my-make-all</code> で <code>my-init.el</code>, <code>utility.el(c)</code> と <code>index.html</code> を生成します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-make-all</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Make `</span><span class="org-doc"><span class="org-constant">my-init.el</span></span><span class="org-doc">', `</span><span class="org-doc"><span class="org-constant">utility.el</span></span><span class="org-doc">' and `</span><span class="org-doc"><span class="org-constant">index.html</span></span><span class="org-doc">'."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my-make-init<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>byte-compile-file my-locate-utility<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my-make-document<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>my-init.el</code> を生成するには関数 <code>my-make-init</code> を利用します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-make-init</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Make `</span><span class="org-doc"><span class="org-constant">my-init.el</span></span><span class="org-doc">' with `</span><span class="org-doc"><span class="org-constant">org-babel-tangle</span></span><span class="org-doc">'."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-3">(</span>find-file-noselect my-locate-readme<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-babel-tangle<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-make-document</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Make document html file."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-3">(</span>find-file-noselect my-locate-readme<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-html-export-to-html<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-orga8375ae" class="outline-3">
<h3 id="orga8375ae"><span class="section-number-3">2.3</span> Package manager</h3>
<div class="outline-text-3" id="text-2-3">
<p>
パッケージマネージャとして <code>straight.el</code> と <code>use-package.el</code> を利用します
</p>
</div>

<ol class="org-ol">
<li><a id="org44032e7"></a>straight.el<br />
<div class="outline-text-4" id="text-2-3-1">
<p>
<a href="https://github.com/raxod502/straight.el">straight.el</a> は Emacs のパッケージマネージャの 1 つです．
</p>

<blockquote>
<p>
next-generation, purely functional package manager for the Emacs hacker.
</p>
</blockquote>

<p>
<code>develop</code> ブランチの <code>straight.el</code> をインストールします．
</p>

<p>
デフォルトのままでは Emacs の起動が遅くなるので <code>straight-check-for-modifications</code> を適当に設定しておきます．
現在のところ <code>(watch-files find-when-checking)</code> に設定するのがベストなようです．
そのためには Python3 と <a href="https://github.com/watchexec/watchexec">watchexec</a> がインストールされている必要があります．
これら 2 つがインストールされていない場合は <code>(check-on-save find-when-checking)</code> に設定します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> straight-repository-branch <span class="org-string">"develop"</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">use the develop branch of straight.el</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-3">(</span>executable-find <span class="org-string">"watchexec"</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span>executable-find <span class="org-string">"python3"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> straight-check-for-modifications '<span class="org-rainbow-delimiters-depth-3">(</span>watch-files find-when-checking<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> straight-check-for-modifications '<span class="org-rainbow-delimiters-depth-3">(</span>check-on-save find-when-checking<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">bootstrap-version</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>bootstrap-file
       <span class="org-rainbow-delimiters-depth-4">(</span>expand-file-name <span class="org-string">"straight/repos/straight.el/bootstrap.el"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>bootstrap-version 5<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>file-exists-p bootstrap-file<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-current-buffer</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>url-retrieve-synchronously
         <span class="org-string">"https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"</span>
         'silent 'inhibit-cookies<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-max<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>eval-print-last-sexp<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>load bootstrap-file nil 'nomessage<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="orgbb8b850"></a>use-package.el<br />
<div class="outline-text-4" id="text-2-3-2">
<p>
<a href="https://github.com/jwiegley/use-package">use-package</a> を用いてパッケージの設定を feature 単位で記述します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>straight-use-package 'use-package<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
keywords は次の順序で書くようにします:
</p>

<ul class="org-ul">
<li><code>:defines</code></li>
<li><code>:functions</code></li>
<li><code>:preface</code></li>
<li><code>:if</code> (or <code>:when</code>)</li>
<li><code>:straight</code></li>
<li><code>:load-path</code></li>
<li><code>:commands</code></li>
<li><code>:init</code></li>
<li><code>:mode</code></li>
<li><code>:interpreter</code></li>
<li><code>:hook</code></li>
<li><code>:hydra</code></li>
<li><code>:bind</code></li>
<li><code>:demand</code></li>
<li><code>:after</code></li>
<li><code>:custom</code></li>
<li><code>:config</code></li>
<li><code>:blackout</code></li>
</ul>

<p>
<code>:preface</code> は <code>:if</code> 節の判定に関わらず読み込まれます．
他パッケージで定義される変数や関数を用いる場合 <code>:defines</code> や <code>:functions</code> に列挙しておくのが安全なようです．
基本的に <code>straight.el</code> を用いてパッケージをインストールするようにします．
また，パッケージは常に遅延ロードします．
遅延ロードをさせないときは明示的に <code>:demand t</code> を指定します．
遅延ロードの際， <code>:after</code> などのキーワードを併用する場合は注意が必要です．
<a href="https://jwiegley.github.io/use-package/keywords/#after">https://jwiegley.github.io/use-package/keywords/#after</a> を参照してください．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> straight-use-package-by-default t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> use-package-always-defer t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
build-in の機能を用いるため <code>use-feature</code> マクロを定めます．
<code>use-feature</code> は radian.el を参考にしました．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">use-feature</span> <span class="org-rainbow-delimiters-depth-2">(</span>name <span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Like `</span><span class="org-doc"><span class="org-constant">use-package</span></span><span class="org-doc">', but with `</span><span class="org-doc"><span class="org-constant">straight-use-package-by-default</span></span><span class="org-doc">' disabled."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">declare</span> <span class="org-rainbow-delimiters-depth-3">(</span>indent defun<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">use-package</span> ,name
     <span class="org-builtin">:straight</span> nil
     ,@args<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org8ede7cf" class="outline-3">
<h3 id="org8ede7cf"><span class="section-number-3">2.4</span> Some package</h3>
<div class="outline-text-3" id="text-2-4">
<p>
いくつかのパッケージを先にインストールします．
これは Emacs 同梱の (古い) バージョンのパッケージの読み込みを避けるためです．
</p>
</div>

<ol class="org-ol">
<li><a id="org2fb620d"></a>Org-mode<br />
<div class="outline-text-4" id="text-2-4-1">
<p>
2019年3月現在の <code>straight.el</code> ではデフォルトで最新の Org-mode をインストールすることができます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>straight-use-package 'org<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="orgad04077"></a>flymake<br />
<div class="outline-text-4" id="text-2-4-2">
<p>
lsp-mode が flymake に依存しており，古いバージョンの flymake を読み込んでしまう恐れがあるようです．
回避策として lsp-mode を読み込む前に最新の flymake をインストールします．
詳細は <a href="https://github.com/raxod502/straight.el#faq">straight.el/FAQ</a> か <a href="https://github.com/raxod502/straight.el/issues/355">straight.el/Issue#355</a> を参照してください
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>straight-use-package 'flymake<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="orgf8c2c90"></a>blackout<br />
<div class="outline-text-4" id="text-2-4-3">
<p>
<a href="https://github.com/raxod502/blackout">blackout</a> は deminish や delight のように，メジャー・マイナーモードのモードラインの表示をカスタマイズできます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">blackout</span>
  <span class="org-builtin">:straight</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"raxod502/blackout"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:demand</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org8112bae"></a>all-the-icons<br />
<div class="outline-text-4" id="text-2-4-4">
<p>
いくつかのパッケージで <code>all-the-icons</code> のフォントを使用します．
フォントが未インストールの場合，自動的にインストールします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">all-the-icons</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>member <span class="org-string">"all-the-icons"</span> <span class="org-rainbow-delimiters-depth-4">(</span>font-family-list<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>all-the-icons-install-fonts t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org7b8d749"></a>Hydra<br />
<div class="outline-text-4" id="text-2-4-5">
<p>
<a href="https://github.com/abo-abo/hydra">Hydra</a> を利用してキーバインドを使いやすくします．
また <a href="https://gitlab.com/to1ne/use-package-hydra">use-package-hydra</a> を用いて use-package のキーワードを追加します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">hydra</span>
  <span class="org-builtin">:demand</span> t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">use-package-hydra</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>hydra<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-org7c32487" class="outline-2">
<h2 id="org7c32487"><span class="section-number-2">3</span> Utilities</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org9e2ac8e" class="outline-3">
<h3 id="org9e2ac8e"><span class="section-number-3">3.1</span> Language, Codings</h3>
<div class="outline-text-3" id="text-3-1">
<p>
日本語かつ UTF8 を使用するようにします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>set-language-environment <span class="org-string">"Japanese"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>prefer-coding-system 'utf-8<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
また Linux 使用時は <code>mozc</code> を用いて日本語入力を行います．
別途 <code>emacs-mozc-bin</code> をインストールする必要があります．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">mozc</span>
  <span class="org-builtin">:if</span> <span class="org-rainbow-delimiters-depth-2">(</span>eq system-type 'gnu/linux<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> default-input-method <span class="org-string">"japanese-mozc"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
macOS 使用時はファイル名の文字コードの問題があります．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> ucs-normalize
  <span class="org-builtin">:if</span> <span class="org-rainbow-delimiters-depth-2">(</span>eq system-type 'darwin<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-file-name-coding-system 'utf-8-hfs<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> locale-coding-system 'utf-8-hfs<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org171af52" class="outline-3">
<h3 id="org171af52"><span class="section-number-3">3.2</span> Server</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Emacs 起動後に <code>server-start</code> します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> server
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . server-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9512ae9" class="outline-3">
<h3 id="org9512ae9"><span class="section-number-3">3.3</span> Backup files</h3>
<div class="outline-text-3" id="text-3-3">
<p>
自動バックアップとオートセーブファイルを <code>.emacs.d/backups</code> に集めます．
<code>.emacs.d/backups</code> は変数 <code>my-backup-directory</code> で変更できます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> backup-directory-alist
      `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">".*"</span> . ,my-backup-directory<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> auto-save-file-name-transforms
      `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">".*"</span> ,my-backup-directory t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> auto-save-list-file-prefix
      <span class="org-rainbow-delimiters-depth-2">(</span>concat my-backup-directory
              <span class="org-string">"/.saves-"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org933cdf4" class="outline-3">
<h3 id="org933cdf4"><span class="section-number-3">3.4</span> Directories</h3>
<div class="outline-text-3" id="text-3-4">
</div>
<ol class="org-ol">
<li><a id="org9ea3a96"></a>dired<br />
<div class="outline-text-4" id="text-3-4-1">
<p>
<code>dired-mode</code> の際，ファイルのアイコンを表示するようにします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">all-the-icons-dired</span>
  <span class="org-builtin">:if</span> <span class="org-rainbow-delimiters-depth-2">(</span>window-system<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>dired-mode . all-the-icons-dired-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org14bf8f5"></a>neotree<br />
<div class="outline-text-4" id="text-3-4-2">
<p>
ツリープラグインとして <a href="https://github.com/jaypei/emacs-neotree">neotree</a> を用います．
<code>C-c t</code> で起動します．
GUI での使用の際，all-the-icons を用いてアイコンを表示するようにします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">neotree</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c t"</span> . neotree-toggle<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>neo-theme <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>display-graphic-p<span class="org-rainbow-delimiters-depth-4">)</span>
                 'classic
               'arrow<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org4cb1078" class="outline-3">
<h3 id="org4cb1078"><span class="section-number-3">3.5</span> Candidates</h3>
<div class="outline-text-3" id="text-3-5">
</div>
<ol class="org-ol">
<li><a id="org8d80fc8"></a>Ivy, Counsel and swiper<br />
<div class="outline-text-4" id="text-3-5-1">
<p>
補完インターフェイスとして <a href="https://github.com/abo-abo/swiper">Ivy/Counsel</a> を利用します．
詳しい使い方は<a href="https://oremacs.com/swiper/">ユーザマニュアル</a>を参照してください．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">counsel</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>after-init . ivy-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span>ivy-mode . counsel-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-s"</span> . swiper<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-r"</span> . swiper<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-S-s"</span> . swiper-all<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c C-r"</span> . ivy-resume<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-builtin">:map</span> ivy-minibuffer-map
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;tab&gt;"</span> . ivy-alt-done<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-w"</span> . ivy-yank-word<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-use-virtual-buffers t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-count-format <span class="org-string">"(%d/%d) "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-wrap t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-format-function 'ivy-format-function-arrow<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>counsel-yank-pop-separator <span class="org-string">"\n&lt;---------&gt;\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-initial-inputs-alist nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:blackout</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
ivy-hydra を利用して minibuffer での操作性を向上させます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ivy-hydra</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> ivy-minibuffer-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-o"</span> . hydra-ivy/body<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<a href="https://github.com/Yevgnen/ivy-rich">ivy-rich</a> を用いてバッファ切り替えの際などにアイコンを表示するようにします．
関数 <code>my-ivy-rich-buffer-icon</code>, <code>my-ivy-rich-file-icon</code> を定義し，バッファ切替時等にアイコンを表示するようにします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">for ivy-rich: show icons</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-ivy-rich-buffer-icon</span> <span class="org-rainbow-delimiters-depth-2">(</span>candidate<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Show buffer isons in `</span><span class="org-doc"><span class="org-constant">ivy-rich</span></span><span class="org-doc">', only on GUI."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>display-graphic-p<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-current-buffer</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>get-buffer candidate<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>icon <span class="org-rainbow-delimiters-depth-7">(</span>all-the-icons-icon-for-mode major-mode<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>symbolp icon<span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>all-the-icons-icon-for-mode 'fundamental-mode<span class="org-rainbow-delimiters-depth-6">)</span>
          icon<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-ivy-rich-file-icon</span> <span class="org-rainbow-delimiters-depth-2">(</span>candidate<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Show file icons in `</span><span class="org-doc"><span class="org-constant">ivy-rich</span></span><span class="org-doc">', only on GUI."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>display-graphic-p<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>icon
           <span class="org-comment-delimiter">;; </span><span class="org-comment">for directories</span>
           <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>file-directory-p candidate<span class="org-rainbow-delimiters-depth-7">)</span>
               <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">cond</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">for `</span><span class="org-comment"><span class="org-constant">tramp-mode</span></span><span class="org-comment">'</span>
                <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-1">(</span>fboundp 'tramp-tramp-file-p<span class="org-rainbow-delimiters-depth-1">)</span>
                      <span class="org-rainbow-delimiters-depth-1">(</span>tramp-tramp-file-p default-directory<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                 <span class="org-rainbow-delimiters-depth-9">(</span>all-the-icons-octicon <span class="org-string">"file-directory"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">for symbolic links</span>
                <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-9">(</span>file-symlink-p candidate<span class="org-rainbow-delimiters-depth-9">)</span>
                 <span class="org-rainbow-delimiters-depth-9">(</span>all-the-icons-octicon <span class="org-string">"file-symlink-directory"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">for git submodules</span>
                <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-9">(</span>all-the-icons-dir-is-submodule candidate<span class="org-rainbow-delimiters-depth-9">)</span>
                 <span class="org-rainbow-delimiters-depth-9">(</span>all-the-icons-octicon <span class="org-string">"file-submodule"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">for version-controled by git</span>
                <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-9">(</span>file-exists-p <span class="org-rainbow-delimiters-depth-1">(</span>format <span class="org-string">"%s/.git"</span> candidate<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                 <span class="org-rainbow-delimiters-depth-9">(</span>all-the-icons-octicon <span class="org-string">"repo"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">otherwise</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>matcher <span class="org-rainbow-delimiters-depth-3">(</span>all-the-icons-match-to-alist candidate all-the-icons-dir-icon-alist<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                     <span class="org-rainbow-delimiters-depth-1">(</span>apply <span class="org-rainbow-delimiters-depth-2">(</span>car matcher<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span>list <span class="org-rainbow-delimiters-depth-3">(</span>cadr matcher<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
             <span class="org-comment-delimiter">;; </span><span class="org-comment">for files</span>
             <span class="org-rainbow-delimiters-depth-7">(</span>all-the-icons-icon-for-file candidate<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-5">(</span>symbolp icon<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>propertize icon
                    'face `<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:family</span> ,<span class="org-rainbow-delimiters-depth-7">(</span>all-the-icons-icon-family icon<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-builtin">:height</span> 1.1<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ivy-rich</span>
  <span class="org-builtin">:functions</span> <span class="org-rainbow-delimiters-depth-2">(</span>my-ivy-rich-buffer-icon my-ivy-rich-file-icon<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>ivy-mode . ivy-rich-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-rich-path-style 'abbrev<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-rich-display-transformers-list
   '<span class="org-rainbow-delimiters-depth-3">(</span>ivy-switch-buffer
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:columns</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>my-ivy-rich-buffer-icon <span class="org-builtin">:width</span> 2<span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-candidate <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> 30<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-switch-buffer-size <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> 7<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-switch-buffer-indicators <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> 4 <span class="org-builtin">:face</span> error <span class="org-builtin">:align</span> left<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-switch-buffer-major-mode <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> 12 <span class="org-builtin">:face</span> warning<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-switch-buffer-project <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> 15 <span class="org-builtin">:face</span> success<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-switch-buffer-path <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-9">(</span>x<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span>ivy-rich-switch-buffer-shorten-path x <span class="org-rainbow-delimiters-depth-1">(</span>ivy-rich-minibuffer-width 0.3<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-builtin">:predicate</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>cand<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>get-buffer cand<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     counsel-M-x
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:columns</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>counsel-M-x-transformer <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> 40<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-counsel-function-docstring <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:face</span> font-lock-doc-face<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     counsel-describe-function
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:columns</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>counsel-describe-function-transformer <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> 40<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-counsel-function-docstring <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:face</span> font-lock-doc-face<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     counsel-describe-variable
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:columns</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>counsel-describe-variable-transformer <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> 40<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-counsel-variable-docstring <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:face</span> font-lock-doc-face<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     counsel-recentf
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:columns</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-candidate <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:width</span> 0.8<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-file-last-modified-time <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:face</span> font-lock-comment-face<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     counsel-find-file
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:columns</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>my-ivy-rich-file-icon <span class="org-builtin">:width</span> 2<span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-candidate<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     counsel-git
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:columns</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>my-ivy-rich-file-icon <span class="org-builtin">:width</span> 2<span class="org-rainbow-delimiters-depth-6">)</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>ivy-rich-candidate<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:blackout</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<a href="https://github.com/DarwinAwardWinner/amx">amx</a> を用いて <code>M-x</code> を ivy と統合します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">amx</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>ivy-mode . amx-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="orgde5aa6e"></a>emacs-which-key<br />
<div class="outline-text-4" id="text-3-5-2">
<p>
<a href="https://github.com/justbur/emacs-which-key">which-key</a> を用いてキーバインドを表示させます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">which-key</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . which-key-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> which-key-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x DEL"</span> . which-key-C-h-dispatch<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c DEL"</span> . which-key-C-h-dispatch<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>which-key-popup-type 'side-window<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>which-key-side-window-location 'bottom<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:blackout</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org2ae70c4" class="outline-3">
<h3 id="org2ae70c4"><span class="section-number-3">3.6</span> Navigation</h3>
<div class="outline-text-3" id="text-3-6">
<p>
<code>C-v</code> で <code>hydra-navi</code> による移動ができるようになります．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defhydra</span> hydra-navi
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:hint</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"</span>
<span class="org-doc">^Navigate^              ^ ^                 ^Action</span>
<span class="org-doc">^^^^^^-----------------------------------------------------------</span>
<span class="org-doc">_f_: foward char        _n_: next line      _s_: search</span>
<span class="org-doc">_F_: foward word        _p_: previous line  _r_: replace</span>
<span class="org-doc">_b_: backward char      _v_: scroll down</span>
<span class="org-doc">_B_: backward word      _V_: scroll up      _k_: kill buffer</span>
<span class="org-doc">_a_: beginning of line  ^ ^</span>
<span class="org-doc">_e_: end of line        ^ ^                 _x_: execute command</span>
<span class="org-doc">"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"n"</span> next-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"p"</span> previous-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"f"</span> forward-char<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"F"</span> forward-word<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"b"</span> backward-char<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"B"</span> backward-word<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"a"</span> beginning-of-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"e"</span> move-end-of-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"v"</span> scroll-up-command<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"V"</span> scroll-down-command<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"s"</span> swiper<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"r"</span> query-replace<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x"</span> counsel-M-x<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"k"</span> kill-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"q"</span> nil <span class="org-string">"quit"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9cbe265" class="outline-3">
<h3 id="org9cbe265"><span class="section-number-3">3.7</span> Others</h3>
<div class="outline-text-3" id="text-3-7">
</div>
<ol class="org-ol">
<li><a id="orge9ad3b1"></a>Parenthesis<br />
<div class="outline-text-4" id="text-3-7-1">
<p>
対応する括弧類は自動的に挿入し，また強調するようにします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> elec-pair
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . electric-pair-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> paren
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . show-paren-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>show-paren-style 'mixed<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">rainbow-delimiters</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>prog-mode . rainbow-delimiters-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org650875b"></a>Whitespace<br />
<div class="outline-text-4" id="text-3-7-2">
<p>
<code>C-c w</code> で空白文字を可視化します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> whitespace
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>whitespace-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c w"</span> . whitespace-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>whitespace-style '<span class="org-rainbow-delimiters-depth-3">(</span>
                      face
                      trailing
                      tabs
                      spaces
                      empty
                      space-mark
                      tab-mark
                      <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:blackout</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org3b8a118"></a>Cursor<br />
<div class="outline-text-4" id="text-3-7-3">
<p>
<a href="https://github.com/Malabarba/beacon">beacon</a> を用いてカーソルを目立たせます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">beacon</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . beacon-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>beacon-color <span class="org-string">"yellow"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org94e3b62"></a>Region<br />
<div class="outline-text-4" id="text-3-7-4">
<p>
選択中のリージョンをハイライトします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'after-init-hook #'transient-mark-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org29fe6a2"></a>Ring bell<br />
<div class="outline-text-4" id="text-3-7-5">
<p>
エラー時のベル音を消します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> ring-bell-function 'ignore<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-orgd851853" class="outline-2">
<h2 id="orgd851853"><span class="section-number-2">4</span> Completion and syntax checking</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgc402c32" class="outline-3">
<h3 id="orgc402c32"><span class="section-number-3">4.1</span> Yasnippet</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">yasnippet</span>
  <span class="org-builtin">:blackout</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org57da66f" class="outline-3">
<h3 id="org57da66f"><span class="section-number-3">4.2</span> Company</h3>
<div class="outline-text-3" id="text-4-2">
<p>
補完には <a href="https://github.com/company-mode/company-mode">company-mode</a> を用います．
各種設定は <a href="https://github.com/company-mode/company-mode/wiki/Switching-from-AC">Switching from AC</a> を参考にしました．
<code>:bind</code> キーワードを使うとうまく読み込まないため， <code>:config</code> と <code>define-key</code> を利用しています
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-company-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key company-active-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"&lt;backtab&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'company-select-previous<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key company-active-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"&lt;tab&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'company-complete-common-or-cycle<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key company-active-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"M-n"</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key company-active-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"M-p"</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key company-active-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-n"</span><span class="org-rainbow-delimiters-depth-3">)</span> #'company-select-next<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key company-active-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-p"</span><span class="org-rainbow-delimiters-depth-3">)</span> #'company-select-previous<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> company-idle-delay 0<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> company-selection-wrap-around t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> company-require-match 'never<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:blackout</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<a href="https://github.com/expez/company-quickhelp">company-quickhelp</a> を用いて補完候補のドキュメントを読めるようにしておきます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company-quickhelp</span>
  <span class="org-builtin">:if</span> <span class="org-rainbow-delimiters-depth-2">(</span>window-system<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>company-mode . company-quickhelp-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<a href="https://github.com/sebastiencs/company-box">company-box</a> を用いて補完候補にアイコンを表示します．
デフォルトの設定のままだと，アイコンが大きく感じるので適当に調整をします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company-box</span>
  <span class="org-builtin">:functions</span> <span class="org-rainbow-delimiters-depth-2">(</span>all-the-icons-faicon all-the-icons-octicon all-the-icons-material all-the-icons-alltheicon<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:preface</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-company-box-icons-all-the-icons</span>
    `<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>Unknown       . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"cog"</span>                      <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Text          . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-octicon    <span class="org-string">"file-text"</span>                <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Method        . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"cube"</span>                     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Function      . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"cube"</span>                     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Constructor   . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"cube"</span>                     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Field         . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"cog"</span>                      <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Variable      . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"cog"</span>                      <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Class         . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"cogs"</span>                     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Interface     . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"share"</span>                    <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Module        . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-alltheicon <span class="org-string">"less"</span>                     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Property      . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"wrench"</span>                   <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Unit          . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"settings_system_daydream"</span> <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Value         . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"format_align_right"</span>       <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Enum          . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"content_copy"</span>             <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Keyword       . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"filter_center_focus"</span>      <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Snippet       . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"content_paste"</span>            <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Color         . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"palette"</span>                  <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>File          . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"file"</span>                     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Reference     . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"collections_bookmark"</span>     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Folder        . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"folder"</span>                   <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>EnumMember    . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"format_align_right"</span>       <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Constant      . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"square-o"</span>                 <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Struct        . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"cogs"</span>                     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Event         . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"bolt"</span>                     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Operator      . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"control_point"</span>            <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>TypeParameter . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-faicon     <span class="org-string">"cogs"</span>                     <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>Template      . ,<span class="org-rainbow-delimiters-depth-5">(</span>all-the-icons-material   <span class="org-string">"format_align_center"</span>      <span class="org-builtin">:height</span> 0.9<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-3">(</span>window-system<span class="org-rainbow-delimiters-depth-3">)</span>
           <span class="org-rainbow-delimiters-depth-3">(</span>&gt;= emacs-major-version 26<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>company-mode . company-box-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>company-box-show-single-candidate t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>company-box-max-candidates 50<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> company-box-backends-colors nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> company-box-icons-alist 'my-company-box-icons-all-the-icons<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:blackout</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfd3473c" class="outline-3">
<h3 id="orgfd3473c"><span class="section-number-3">4.3</span> Flycheck</h3>
<div class="outline-text-3" id="text-4-3">
<p>
文法チェックには <a href="https://www.flycheck.org/en/latest/">Flycheck</a> を利用します．
後述の <a href="#org724a217">LSP</a> を用いる場合には暴走するという情報があるので要確認です．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">flycheck</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>flycheck-disable-checker<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-flycheck-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>flycheck-disabled-checkers '<span class="org-rainbow-delimiters-depth-3">(</span>emacs-lisp-checkdoc<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
エラー内容の表示に <a href="https://github.com/flycheck/flycheck-popup-tip">flycheck-popup-tip</a> を利用します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">flycheck-popup-tip</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>flycheck-mode . flycheck-popup-tip-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org724a217" class="outline-3">
<h3 id="org724a217"><span class="section-number-3">4.4</span> LSP</h3>
<div class="outline-text-3" id="text-4-4">
<p>
いくつかの言語では Language Server Protocol を用いて補完・文法チェックを行います．
詳細は各言語の設定を参照してください．
</p>

<p>
ここでは <a href="https://github.com/emacs-lsp/lsp-mode">lsp-mode</a> を利用します．
補完には <a href="https://github.com/tigersoldier/company-lsp">company-lsp</a> を，文法チェックには <a href="https://github.com/emacs-lsp/lsp-ui">lsp-ui/flycheck</a> を利用します．
</p>

<p>
lsp-mode と flycheck を併用するにはカスタム変数 <code>lsp-prefer-flymake</code> を <code>nil</code> にセットします．
また flycheck-popup-tip を使用していると画面がうるさくなるのでカスタム変数 <code>lsp-ui-sideline-enable</code> を <code>nil</code> にセットし，
<code>lsp-ui-sideline-mode</code> を無効化します．
</p>

<p>
大きいプロジェクトを開くと flycheck が重くなるという話もあるので場合によっては flymake を使うほうが良いかもしれません．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">lsp-mode</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>lsp<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>lsp-prefer-flymake nil <span class="org-string">"Use `</span><span class="org-string"><span class="org-constant">flycheck</span></span><span class="org-string">'."</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company-lsp</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>company<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> 'company-lsp company-backends<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">lsp-ui</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>lsp-ui-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>lsp-mode . lsp-ui-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> lsp-ui-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">[</span>remap xref-find-definitions<span class="org-rainbow-delimiters-depth-4">]</span> . lsp-ui-peek-find-definitions<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">[</span>remap xref-find-references<span class="org-rainbow-delimiters-depth-4">]</span> . lsp-ui-peek-find-references<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>lsp-ui-sideline-enable nil <span class="org-string">"Disable `</span><span class="org-string"><span class="org-constant">lsp-ui-sideline-mode</span></span><span class="org-string">'."</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:blackout</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd4f5452" class="outline-2">
<h2 id="orgd4f5452"><span class="section-number-2">5</span> Documents</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgc86a1da" class="outline-3">
<h3 id="orgc86a1da"><span class="section-number-3">5.1</span> Org-mode</h3>
<div class="outline-text-3" id="text-5-1">
<p>
<a href="https://orgmode.org/">Org-mode</a> の設定を行います．
前の方で <code>(straight-use-package 'org)</code> しているので <code>use-feature</code> マクロを用います．
Org-mode でのマークアップのため，electric pair の設定を適当に変更します．
また， <code>electric-pair-mode</code> により <code>&gt;</code> が自動挿入されるのを禁止しています．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">for Org-mode: integrate with electric-pair-mode</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-org-electric-pair-pairs</span>
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>?~ . ?~<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>?= . ?=<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-org-electric-pair-inhibit</span> <span class="org-rainbow-delimiters-depth-2">(</span>char<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Do not insert close `&gt;'."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>char-equal char ?&lt;<span class="org-rainbow-delimiters-depth-3">)</span>
      t
    <span class="org-rainbow-delimiters-depth-3">(</span>electric-pair-default-inhibit char<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-org-electric-pair-mode</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Use Org-mode with electric-pair-mode."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>electric-pair-mode +1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-local</span> electric-pair-pairs <span class="org-rainbow-delimiters-depth-3">(</span>append electric-pair-pairs
                                          my-org-electric-pair-pairs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-local</span> electric-pair-text-pairs <span class="org-rainbow-delimiters-depth-3">(</span>append electric-pair-text-pairs
                                               my-org-electric-pair-pairs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-local</span> electric-pair-inhibit-predicate #'my-org-electric-pair-inhibit<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
HTML へのエクスポート時に CSS を分離するように <code>org-html-htmlize-output-type</code> を変更します．
Org-mode 9.2 より easy templete の代わりに <code>org-insert-structure-templete</code> (<code>C-c C-,</code>) を使うようになったようです．
easy templete を利用するには <code>(require 'org-temp)</code> する必要があります．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> org
  <span class="org-builtin">:functions</span> <span class="org-rainbow-delimiters-depth-2">(</span>my-org-electric-pair-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-mode . my-org-electric-pair-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-startup-indented t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-fontify-natively t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-html-htmlize-output-type 'css<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-structure-template-alist <span class="org-rainbow-delimiters-depth-3">(</span>append '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"el"</span> . <span class="org-string">"src emacs-lisp"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                             org-structure-template-alist<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<a href="https://github.com/sabof/org-bullets">org-bullets</a> で見た目を変更します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-bullets</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-mode . org-bullets-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Github Flavored Markdown へのエクスポートのため <a href="https://github.com/larstvei/ox-gfm">ox-gfm</a> をインストールします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ox-gfm</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>ox<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
HTML へのエクスポートの際，コードハイライトに <a href="https://github.com/hniksic/emacs-htmlize">htmlize</a> を利用します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">htmlize</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>ox<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org667fed6" class="outline-3">
<h3 id="org667fed6"><span class="section-number-3">5.2</span> Outline</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Hydra を用いて outline-minor-mode を使いやすくします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> outline
  <span class="org-builtin">:hydra</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>hydra-outline
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:hint</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-string">"</span>
<span class="org-string">^Navigate^                ^Hide^         ^Show^         ^Edit^</span>
<span class="org-string">^^^^^^^^^^------------------------------------------------------------------------------</span>
<span class="org-string">_u_: up                   _l_: leaves    _a_: all       _&#8593;_: move up</span>
<span class="org-string">_n_: next visible         _t_: body      _e_: entry     _&#8595;_: move down</span>
<span class="org-string">_p_: previous visible     _c_: entry     _k_: branches  _&#8592;_: promote</span>
<span class="org-string">_f_: forward same level   _d_: subtree   _i_: children  _&#8594;_: demote</span>
<span class="org-string">_b_: backward same level  _q_: sublevel  _s_: subtree</span>
<span class="org-string">^^                        _o_: other     ^ ^            _z_: quit</span>
<span class="org-string">"</span>
   <span class="org-comment-delimiter">;; </span><span class="org-comment">Navigate</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"u"</span> outline-up-heading<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"n"</span> outline-next-visible-heading<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"p"</span> outline-previous-visible-heading<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"f"</span> outline-forward-same-level<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"b"</span> outline-backward-same-level<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-comment-delimiter">;; </span><span class="org-comment">Hide</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"l"</span> hide-leaves<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"t"</span> hide-body<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"c"</span> hide-entry<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"d"</span> hide-subtree<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"q"</span> hide-sublevel<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"o"</span> hide-other<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-comment-delimiter">;; </span><span class="org-comment">Show</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"a"</span> show-all<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"e"</span> show-entry<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"k"</span> show-branches<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"i"</span> show-children<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"s"</span> show-subtree<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-comment-delimiter">;; </span><span class="org-comment">Edit</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;up&gt;"</span> outline-move-subtree-up<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;down&gt;"</span> outline-move-subtree-down<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;left&gt;"</span> outline-promote<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;right&gt;"</span> outline-demote<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-comment-delimiter">;; </span><span class="org-comment">quit</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"z"</span> nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> outline-minor-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c #"</span> . hydra-outline/body<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgef7ed5c" class="outline-3">
<h3 id="orgef7ed5c"><span class="section-number-3">5.3</span> TeX/LaTeX</h3>
<div class="outline-text-3" id="text-5-3">
</div>
<ol class="org-ol">
<li><a id="org7353b5c"></a>YaTeX<br />
<div class="outline-text-4" id="text-5-3-1">
<p>
TeX/LaTeX 文書の編集には <a href="http://yatex.org/">YaTeX: Yet Another TeX mode for Emacs</a> を利用します．
基本的な使い方は<a href="https://www.yatex.org/yatexref.txt">クイックヘルプ</a>を参照してください．
よく使うものを抜き出すと
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key</th>
<th scope="col" class="org-left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>C-c C-b SPC</code></td>
<td class="org-left">Insert \begin{%s} &#x2026; \end{%s}</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-s</code></td>
<td class="org-left">Insert \section{%s} &#x2026; etc.</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-c</code></td>
<td class="org-left">Change env. name (on \begin or \end)</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-k</code></td>
<td class="org-left">Kill LaTeX command (on LaTeX command)</td>
</tr>

<tr>
<td class="org-left"><code>C-c )</code></td>
<td class="org-left">Enclose region by ()</td>
</tr>

<tr>
<td class="org-left"><code>C-c ]</code></td>
<td class="org-left">Enclose region by []</td>
</tr>

<tr>
<td class="org-left"><code>C-c }</code></td>
<td class="org-left">Enclose region by {}</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-g</code></td>
<td class="org-left">Cursor jump</td>
</tr>
</tbody>
</table>

<p>
outline-minor-mode と併用するためにいくつかの変数や関数を定義します．
これらの定義は GNU Emacs 同梱の tex-mode.el でのそれとほぼ同等です．
変数 <code>ouline-promotion-headings</code> は outline-magic のためのものです．
</p>

<p>
<code>outline-{promote, demote}</code> は使いすぎるとアウトライン構造が変になるので注意が必要です．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">For YaTeX: integrate with outline-minor-mode</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">The following code is a modification a part of `</span><span class="org-comment"><span class="org-constant">tex-mode.el</span></span><span class="org-comment">'</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">which is bundled with GNU Emacs.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Copyright (C) 1985-1986, 1989, 1992, 1994-1999, 2001-2019 Free</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Software Foundation, Inc.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Released under the GPL v3.0 or any later version.</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-YaTeX-section-alist</span>
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"part"</span> . 0<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"chapter"</span> . 1<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"section"</span> . 2<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"subsection"</span> . 3<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"subsubsection"</span> . 4<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"paragraph"</span> . 5<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"subparagraph"</span> . 6<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-YaTeX-metasection-list</span>
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"documentclass"</span>
    <span class="org-string">"begin{document}"</span> <span class="org-string">"end{document}"</span>
    <span class="org-string">"frontmatter"</span> <span class="org-string">"mainmatter"</span> <span class="org-string">"appendix"</span> <span class="org-string">"backmatter"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-YaTeX-outline-regexp</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>concat <span class="org-rainbow-delimiters-depth-3">(</span>regexp-quote <span class="org-string">"\\"</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span>regexp-opt <span class="org-rainbow-delimiters-depth-4">(</span>append my-YaTeX-metasection-list
                              <span class="org-rainbow-delimiters-depth-5">(</span>mapcar #'car my-YaTeX-section-alist<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                      t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-YaTeX-outline-level</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>looking-at my-YaTeX-outline-regexp<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>1+ <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-5">(</span>cdr <span class="org-rainbow-delimiters-depth-6">(</span>assoc <span class="org-rainbow-delimiters-depth-7">(</span>match-string 1<span class="org-rainbow-delimiters-depth-7">)</span> my-YaTeX-section-alist<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> -1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    1000<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-YaTeX-with-outline</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>outline-minor-mode 1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-local</span> outline-regexp my-YaTeX-outline-regexp<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-local</span> outline-level #'my-YaTeX-outline-level<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
YaTeX の読み込み前に <code>YaTeX-inhibit-prefix-letter</code> を t に設定することで，
YaTeX のプレフィックスキーを <code>C-c C-英字</code> に変更します．
TeX 文書でのエンコーディングには UTF-8 を利用します．
また，コンパイルには <a href="https://ctan.org/pkg/latexmk">Latexmk</a> を使用します．
ユーザ補完辞書は <code>~/texmf/emacs/yatexrc</code> に指定します．
macOS では <code>TEXMFHOME</code> は <code>~/Library/texmf</code> のようなので適宜ホームディレクトリにシンボリックリンクを張ります．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">yatex</span>
  <span class="org-builtin">:functions</span> <span class="org-rainbow-delimiters-depth-2">(</span>my-YaTeX-with-outline<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:preface</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-YaTeX-user-completion-table</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"~/texmf/emacs/yatexrc"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"You put here your own completion table."</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>yatex-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> YaTeX-inhibit-prefix-letter t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.tex\\'"</span> . yatex-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.sty\\'"</span> . yatex-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.ltx\\'"</span> . yatex-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>yatex-mode . my-YaTeX-with-outline<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> YaTeX-kanji-code 4<span class="org-rainbow-delimiters-depth-2">)</span>             <span class="org-comment-delimiter">; </span><span class="org-comment">use UTF-8</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> YaTeX-use-AMS-LaTeX t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> tex-command <span class="org-string">"latexmk"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> YaTeX-user-completion-table my-YaTeX-user-completion-table<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'align-load-hook
            #'<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">()</span>
                <span class="org-rainbow-delimiters-depth-4">(</span>add-to-list 'align-rules-list '<span class="org-rainbow-delimiters-depth-5">(</span>yatex-table
                                                 <span class="org-rainbow-delimiters-depth-6">(</span>regexp . <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">\\s-*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">&amp;"</span><span class="org-rainbow-delimiters-depth-6">)</span>
                                                 <span class="org-rainbow-delimiters-depth-6">(</span>repeat . t<span class="org-rainbow-delimiters-depth-6">)</span>
                                                 <span class="org-rainbow-delimiters-depth-6">(</span>mode . '<span class="org-rainbow-delimiters-depth-7">(</span>yatex-mode<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
イメージ数式補完の他に <a href="https://github.com/vspinu/company-math">company-math</a> による補完を利用します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company-math</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>company yatex<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> 'company-math-symbols-latex company-backends<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> 'company-latex-commands company-backends<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
文法チェッカである chktex や lacheck を flycheck を通して利用できるようにします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">flycheck-yatex</span>
  <span class="org-builtin">:straight</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"mahito1594/flycheck-yatex"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>flycheck yatex<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org5e8025c"></a>RefTeX<br />
<div class="outline-text-4" id="text-5-3-2">
<p>
参考文献や相互参照のために <a href="https://www.gnu.org/software/auctex/reftex.html">RefTeX</a> を利用します．
YaTeX の <code>YaTeX-insert-paren-region</code> と併用するために <code>C-c )</code> を nil にバインドします．
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key</th>
<th scope="col" class="org-left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>C-c =</code></td>
<td class="org-left">Show table of contents</td>
</tr>

<tr>
<td class="org-left"><code>C-c (</code></td>
<td class="org-left">Insert \ref</td>
</tr>

<tr>
<td class="org-left"><code>C-c [</code></td>
<td class="org-left">Insert \cite</td>
</tr>
</tbody>
</table>

<p>
相互参照に <a href="https://ctan.org/pkg/cleveref">cleveref</a> を利用するには次の 2 通りの方法があります．
</p>

<ol class="org-ol">
<li>関数 <code>reftex-cleveref-cref</code> を利用する．</li>
<li>カスタム変数 <code>reftex-ref-style-default-list</code> を <code>("Cleveref")</code> に変更する．</li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> reftex
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>yatex-mode . reftex-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> reftex-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c )"</span> . nil<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c ("</span> . reftex-reference<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c {"</span> . reftex-cleveref-cref<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>reftex-ref-style-default-list '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Cleveref"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>reftex-label-alist '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>nil ?e nil <span class="org-string">"~\\ref{%s}"</span> nil nil<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">omit parens surrounding eq-like reference</span>
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"definition"</span>  ?d <span class="org-string">"def:"</span>  <span class="org-string">"~\\ref{%s}"</span> nil <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"definiton"</span><span class="org-rainbow-delimiters-depth-5">)</span>   nil<span class="org-rainbow-delimiters-depth-4">)</span>
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"proposition"</span> ?p <span class="org-string">"prop:"</span> <span class="org-string">"~\\ref{%s}"</span> nil <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"proposition"</span><span class="org-rainbow-delimiters-depth-5">)</span> nil<span class="org-rainbow-delimiters-depth-4">)</span>
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"theorem"</span>     ?p <span class="org-string">"thm:"</span>  <span class="org-string">"~\\ref{%s}"</span> nil <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"theorem"</span><span class="org-rainbow-delimiters-depth-5">)</span>     nil<span class="org-rainbow-delimiters-depth-4">)</span>
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"lemma"</span>       ?p <span class="org-string">"lem:"</span>  <span class="org-string">"~\\ref{%s}"</span> nil <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"lemma"</span><span class="org-rainbow-delimiters-depth-5">)</span>       nil<span class="org-rainbow-delimiters-depth-4">)</span>
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"corollary"</span>   ?p <span class="org-string">"cor:"</span>  <span class="org-string">"~\\ref{%s}"</span> nil <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"corollary"</span><span class="org-rainbow-delimiters-depth-5">)</span>   nil<span class="org-rainbow-delimiters-depth-4">)</span>
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"remark"</span>      ?r <span class="org-string">"rem:"</span>  <span class="org-string">"~\\ref{%s}"</span> nil <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"remark"</span><span class="org-rainbow-delimiters-depth-5">)</span>      nil<span class="org-rainbow-delimiters-depth-4">)</span>
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"example"</span>     ?x <span class="org-string">"ex:"</span>   <span class="org-string">"~\\ref{%s}"</span> nil <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"example"</span><span class="org-rainbow-delimiters-depth-5">)</span>     nil<span class="org-rainbow-delimiters-depth-4">)</span>
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"conjecture"</span>  ?c <span class="org-string">"conj:"</span> <span class="org-string">"~\\ref{%s}"</span> nil <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"conjecture"</span><span class="org-rainbow-delimiters-depth-5">)</span>  nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>reftex-bibpath-environment-varibales '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"!kpsewhich -show-path=.bib"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>reftex-bibliography-commands '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"bibliography"</span>
                                  <span class="org-string">"nobibliography"</span>
                                  <span class="org-string">"addbibresource"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="orgd42ecac"></a>BibTeX<br />
<div class="outline-text-4" id="text-5-3-3">
<p>
BibTeX データベースの簡単な編集，および後述の Ebib が利用する設定を記述します．
</p>

<p>
特に citation key を <code>&lt;第一著者の姓&gt;&lt;出版年&gt;:&lt;論文タイトルの最初の1語&gt;</code> の形に自動作成するため，
<code>bibtex-autokey-*</code> を適当に設定します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> bibtex
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.bib\\'"</span> . bibtex-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> bibtex-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-j"</span> . nil<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-&lt;return&gt;"</span> . bibtex-next-field<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bibtex-user-optional-fields '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"yomi"</span> <span class="org-string">"Yomigana"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"MRNUMBER"</span> <span class="org-string">"Math. Rev. Number"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"archivePrefix"</span> <span class="org-string">"name of preprint server"</span> <span class="org-string">"arXiv"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"eprint"</span> <span class="org-string">"Electric Print"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"primaryClass"</span> <span class="org-string">"Primary class used by arXiv"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                 <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"shortjournal"</span> <span class="org-string">"Journal Abbreviation"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bibtex-autokey-name-case-convert 'capitalize<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bibtex-autokey-titleword-case-convert 'capitalize<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bibtex-autokey-titleword-separator <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bibtex-autokey-titleword-length nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bibtex-autokey-titlewords 1<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bibtex-autokey-year-length 4<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bibtex-autokey-year-title-separator <span class="org-string">":"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>bibtex-autokey-titleword-ignore '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"A"</span> <span class="org-string">"An"</span> <span class="org-string">"On"</span> <span class="org-string">"The"</span> <span class="org-string">"a"</span> <span class="org-string">"an"</span> <span class="org-string">"on"</span> <span class="org-string">"the"</span>
                                     <span class="org-string">"Le"</span> <span class="org-string">"La"</span> <span class="org-string">"Les"</span> <span class="org-string">"le"</span> <span class="org-string">"la"</span> <span class="org-string">"les"</span>
                                     <span class="org-string">"Zur"</span> <span class="org-string">"zur"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org6116fb8"></a>Ebib<br />
<div class="outline-text-4" id="text-5-3-4">
<p>
文献管理には <a href="https://github.com/joostkremers/ebib">Ebib</a> を利用します．
基本的には <code>~/texmf/bibtex/bib</code> 以下の <code>.bib</code> ファイルに文献情報を記述していきます．
論文の PDF は <code>~/BibFile</code> 以下に適切に配置し，Dropbox 等で同期します．
</p>

<p>
Index buffer での基本操作は次の通りです．
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key</th>
<th scope="col" class="org-left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>o</code></td>
<td class="org-left">Open .bib file</td>
</tr>

<tr>
<td class="org-left"><code>f</code></td>
<td class="org-left">Open file</td>
</tr>

<tr>
<td class="org-left"><code>u</code></td>
<td class="org-left">Browse URL</td>
</tr>

<tr>
<td class="org-left"><code>a</code></td>
<td class="org-left">Add entry</td>
</tr>

<tr>
<td class="org-left"><code>e</code></td>
<td class="org-left">Edit entry</td>
</tr>

<tr>
<td class="org-left"><code>E</code></td>
<td class="org-left">Edit entry-key</td>
</tr>

<tr>
<td class="org-left"><code>m</code></td>
<td class="org-left">Mark current entry</td>
</tr>

<tr>
<td class="org-left"><code>M</code></td>
<td class="org-left">Mark all entries</td>
</tr>

<tr>
<td class="org-left"><code>x</code></td>
<td class="org-left">Export marked entries</td>
</tr>

<tr>
<td class="org-left"><code>!</code></td>
<td class="org-left">Auto-generate entry-key</td>
</tr>

<tr>
<td class="org-left"><code>s</code></td>
<td class="org-left">Save</td>
</tr>

<tr>
<td class="org-left"><code>z</code></td>
<td class="org-left">Pause</td>
</tr>

<tr>
<td class="org-left"><code>q</code></td>
<td class="org-left">Quit</td>
</tr>
</tbody>
</table>

<p>
Entry buffer での基本操作は次のとおりです．
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key</th>
<th scope="col" class="org-left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>a</code></td>
<td class="org-left">Add field</td>
</tr>

<tr>
<td class="org-left"><code>e</code></td>
<td class="org-left">Edit field</td>
</tr>

<tr>
<td class="org-left"><code>m</code></td>
<td class="org-left">Edit multiline buffer</td>
</tr>

<tr>
<td class="org-left"><code>d</code></td>
<td class="org-left">Delete field</td>
</tr>

<tr>
<td class="org-left"><code>q</code></td>
<td class="org-left">Quit</td>
</tr>
</tbody>
</table>

<p>
PDF 閲覧のために次のような関数を定義しておきます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">For Ebib</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my-ebib-name-transform-function</span> <span class="org-rainbow-delimiters-depth-2">(</span>key<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Serach file of the form</span>
<span class="org-doc">       SEARCH-DIRS/FIRST-AUTHOR/ENTRY-KEY"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>format <span class="org-string">"%s/%s"</span>
          <span class="org-rainbow-delimiters-depth-3">(</span>substring key <span class="org-rainbow-delimiters-depth-4">(</span>string-match <span class="org-string">"[A-Za-z]+"</span> key<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>match-end 0<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">(</span>replace-regexp-in-string <span class="org-string">":"</span> <span class="org-string">""</span> key<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ebib</span>
  <span class="org-builtin">:functions</span> <span class="org-rainbow-delimiters-depth-2">(</span>my-ebib-name-transform-function<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:preface</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my-ebib-keywords-file</span> <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"~/texmf/emacs/ebib-keywords.txt"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"You put here `</span><span class="org-doc"><span class="org-constant">ebib-keywords.txt</span></span><span class="org-doc">'."</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>ebib<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> ebib-multiline-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c C-c"</span> . ebib-quit-multiline-buffer-and-save<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-bitex-dialect 'BibTeX<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Preload database</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-preload-bib-files '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"~/texmf/bibtex/bib/articles.bib"</span>
                            <span class="org-string">"~/texmf/bibtex/bib/books.bib"</span>
                            <span class="org-string">"~/texmf/bibtex/bib/others.bib"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Extra fields</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-extra-fields '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>BibTeX <span class="org-string">"crossref"</span>
                               <span class="org-string">"annote"</span>
                               <span class="org-string">"keywords"</span>
                               <span class="org-string">"doi"</span>
                               <span class="org-string">"shortjournal"</span>
                               <span class="org-string">"archivePrefix"</span> <span class="org-string">"eprint"</span> <span class="org-string">"primaryClass"</span>
                               <span class="org-string">"MRCLASS"</span> <span class="org-string">"MRNUMBER"</span>
                               <span class="org-string">"file"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                       <span class="org-rainbow-delimiters-depth-4">(</span>biblatex <span class="org-string">"crossref"</span>
                                 <span class="org-string">"annotation"</span>
                                 <span class="org-string">"keywords"</span>
                                 <span class="org-string">"shortjournal"</span>
                                 <span class="org-string">"archivePrefix"</span> <span class="org-string">"primaryClass"</span>
                                 <span class="org-string">"MRCLASS"</span> <span class="org-string">"MRNUMBER"</span>
                                 <span class="org-string">"file"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Files</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-file-search-dirs '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"~/BibFile/Papers"</span>
                           <span class="org-string">"~/BibFile/Books"</span>
                           <span class="org-string">"~/BibFile/Proceedings"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-name-transform-function #'my-ebib-name-transform-function<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-file-associations <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>eq system-type 'darwin<span class="org-rainbow-delimiters-depth-5">)</span> '<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"pdf"</span> . <span class="org-string">"open"</span><span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"ps"</span> . <span class="org-string">"open"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                <span class="org-rainbow-delimiters-depth-4">(</span>t '<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"pdf"</span> . <span class="org-string">"xpdf"</span><span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"ps"</span> . <span class="org-string">"gv"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Keywords</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-keywords-use-only-file t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-keywords-field-keep-sorted t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-keywords-file-save-on-exit 'always<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ebib-keywords-file my-ebib-keywords-file<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org8ebc57a" class="outline-3">
<h3 id="org8ebc57a"><span class="section-number-3">5.4</span> Markdown</h3>
</div>
</div>

<div id="outline-container-org549eff3" class="outline-2">
<h2 id="org549eff3"><span class="section-number-2">6</span> Programming Languages</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgf9a4f72" class="outline-3">
<h3 id="orgf9a4f72"><span class="section-number-3">6.1</span> C/C++</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Language Server として <a href="https://github.com/MaskRay/ccls">ccls</a> を利用します．
ccls のインストール方法については <a href="https://github.com/MaskRay/ccls/wiki/Build">Wiki/Build</a> を参照してください．
</p>

<p>
macOS の場合は homebrew からインストールできます．
</p>

<div class="org-src-container">
<pre class="src src-sh">brew tap twlz0ne/homebrew-ccls
brew install ccls
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ccls</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>c-mode c++-mode objc-mode<span class="org-rainbow-delimiters-depth-3">)</span> . <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
                                         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">require</span> '<span class="org-constant">ccls</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                         <span class="org-rainbow-delimiters-depth-4">(</span>lsp<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> ccls-sem-highlight-method 'font-lock<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ccls-use-default-rainbow-sem-highlight<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">modern-cpp-font-lock</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>modern-c++-font-lock-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>c++-mode-hook . modern-c++-font-lock-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:blackout</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf1a9bdd" class="outline-3">
<h3 id="orgf1a9bdd"><span class="section-number-3">6.2</span> Emacs Lisp</h3>
<div class="outline-text-3" id="text-6-2">
<p>
flycheck の emacs-lisp-checkdoc の警告はあまり有益に思えないため無効化しています．
有効化するには <code>C-u M-x flycheck-disable-checker</code> とします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> elisp-mode
  <span class="org-builtin">:blackout</span> <span class="org-rainbow-delimiters-depth-2">(</span>lisp-interaction-mode . <span class="org-string">"Lisp-Interaction"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8803303" class="outline-3">
<h3 id="org8803303"><span class="section-number-3">6.3</span> Ocaml</h3>
<div class="outline-text-3" id="text-6-3">
<p>
OCaml の編集には <a href="https://github.com/ocaml/tuareg">tuareg-mode</a> を利用します．
<a href="https://github.com/freebroccolo/ocaml-language-server">ocaml-language-server</a> と lsp-mode を利用して補完等を行います．
インストールは
</p>

<div class="org-src-container">
<pre class="src src-sh">~$ npm install -g ocaml-language-server
~$ opam install merlin               <span class="org-comment-delimiter"># </span><span class="org-comment">if needed</span>
</pre>
</div>

<p>
とします．
キチンと使っていないので後で加筆するかもしれません．
</p>

<p>
<a href="https://khady.info/emacs-ocaml-lsp.html">このブログ</a>によれば merlin と language server が統合されたようなので近々設定を書き換えるかもしれません．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">tuareg</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>tuareg-mode . lsp<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ac2c60" class="outline-3">
<h3 id="org9ac2c60"><span class="section-number-3">6.4</span> Python</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Emacs 同梱の <code>python.el</code> を利用します．
<code>python-mode.el</code> ではないことに注意してください．
</p>

<p>
<code>python3</code> がインストールされている場合， <code>python2</code> ではなく <code>python3</code> を使うようにします．
またインデントには空白 4 文字を用いるようにします．
</p>

<p>
LSP (<a href="https://github.com/palantir/python-language-server">pyls</a>) を利用して補完・文法チェックを行います．
インストールは
</p>

<div class="org-src-container">
<pre class="src src-sh">~$ pip install <span class="org-string">'python-language-server[all]'</span>
</pre>
</div>

<p>
とします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-feature</span> python
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.py\\'"</span> . python-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:interpreter</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"python"</span> . python-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>python-mode . <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
                         <span class="org-rainbow-delimiters-depth-4">(</span>lsp<span class="org-rainbow-delimiters-depth-4">)</span>
                         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq-local</span> indent-tabs-mode nil<span class="org-rainbow-delimiters-depth-4">)</span>
                         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq-local</span> tab-width 4<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>executable-find <span class="org-string">"python3"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">use python3 if it exists</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> python-shell-interpreter <span class="org-string">"python3"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfb4216e" class="outline-2">
<h2 id="orgfb4216e"><span class="section-number-2">7</span> Appearance</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org668f48a" class="outline-3">
<h3 id="org668f48a"><span class="section-number-3">7.1</span> Color theme</h3>
<div class="outline-text-3" id="text-7-1">
<p>
<a href="https://github.com/hlissner/emacs-doom-themes">doom-themes</a> の <code>doom-dracula</code> テーマを利用します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">doom-themes</span>
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-themes-enable-bold t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-themes-enable-italic t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-neotree-file-icons t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>load-theme 'doom-dracula t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-themes-visual-bell-config<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-themes-neotree-config<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-themes-org-config<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
またモードラインを <a href="https://github.com/seagle0128/doom-modeline">doom-modeline</a> でカスタマイズします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">doom-modeline</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . doom-modeline-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-modeline-buffer-file-name-style 'truncate-upto-project<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-modeline-icon t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>doom-modeline-major-mode-color-icon t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>find-file-visit-truename t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> doom-modeline-mu4e nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> doom-modeline-irc nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbbf9510" class="outline-3">
<h3 id="orgbbf9510"><span class="section-number-3">7.2</span> Frame</h3>
<div class="outline-text-3" id="text-7-2">
<p>
ツールバー等，特に必要のないものは表示しないようにします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> inhibit-startup-screen t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>tool-bar-mode -1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>scroll-bar-mode -1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>size-indication-mode +1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> frame-title-format <span class="org-string">"%f"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Emacs 26 以上を使用している場合 <code>display-line-numbers-mode</code> を利用します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>version&lt;= <span class="org-string">"26.0.50"</span> emacs-version<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'after-init-hook #'global-display-line-numbers-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Emacs 起動時にフレームを最大化します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>set-frame-parameter nil 'fullscreen 'maximized<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org55aa0d2" class="outline-3">
<h3 id="org55aa0d2"><span class="section-number-3">7.3</span> Font</h3>
<div class="outline-text-3" id="text-7-3">
<p>
フォントに関しては，次のように記述した <code>.el</code> ファイルを <code>local/</code> 以下に配置します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>set-face-attribute 'default nil
                    <span class="org-builtin">:family</span> <span class="org-string">"Source Han Code JP"</span>
                    <span class="org-builtin">:height</span> 140<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf9f73f9" class="outline-2">
<h2 id="orgf9f73f9"><span class="section-number-2">8</span> Global keybindings</h2>
<div class="outline-text-2" id="text-8">
<p>
global-map のキーバインドを次のように変更します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>define-key global-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-m"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'newline-and-indent<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key global-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-2"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'set-mark-command<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key global-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-t"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'other-window<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key global-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-;"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'comment-line<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key global-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-v"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'hydra-navi/body<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
また <code>C-h</code> を <code>DEL</code> と入れ替えます．
<code>help-for-help</code> は <code>C-x ?</code> にバインドします．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>define-key key-translation-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-h"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"DEL"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key global-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-x ?"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'help-for-help<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb9e54fd" class="outline-2">
<h2 id="orgb9e54fd"><span class="section-number-2">9</span> Local configuration</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-orgaaa4189" class="outline-3">
<h3 id="orgaaa4189"><span class="section-number-3">9.1</span> Overview</h3>
<div class="outline-text-3" id="text-9-1">
<p>
<code>.emacs.d/local-conf.el</code> にマシン・環境ごとの設定を記述します．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>file-exists-p my-local-config-file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>load my-local-config-file<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
また Customize で設定したカスタム変数は <code>.emacs.d/custom-file.el</code> に記述されます．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> custom-file <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"custom-file.el"</span>
                                    user-emacs-directory<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>file-exists-p custom-file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>load custom-file<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3bf996a" class="outline-2">
<h2 id="org3bf996a"><span class="section-number-2">10</span> License</h2>
<div class="outline-text-2" id="text-10">
<p>
本設定ファイルは <a href="https://www.gnu.org/licenses/gpl.html">GNU 一般公衆ライセンス</a> (バージョン 3 または以降の任意のバージョン) で公開しています．
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">provide</span> '<span class="org-constant">utility</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;;; </span><span class="org-comment">utility.el ends here</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">provide</span> '<span class="org-constant">my-init</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;;; </span><span class="org-comment">my-init.el ends here</span>
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Mahito TANNO</p>
<p class="date">Created: 2019-04-11 Thu 22:26</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
